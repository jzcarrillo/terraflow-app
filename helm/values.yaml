# Namespace is automatically set via --namespace flag during helm install/upgrade
# No need to specify here - Helm will use the namespace from the command

image:
  repository: localhost:5001/terraflow
  tag: latest

api-gateway:
  replicaCount: 1
  image:
    repository: terraflow/api-gateway
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: NodePort
    port: 8081
    nodePort: 30080

frontend:
  replicaCount: 1
  image:
    repository: terraflow/frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 4005
  env:
    API_URL: "http://localhost:30080/api"
    DASHBOARD_URL: "http://localhost:4005"
    NODE_ENV: "development"

backend-landregistry:
  replicaCount: 1
  image:
    repository: terraflow/backend-landregistry
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3000
  env:
    DB_HOST: postgres-service
    DB_PORT: 5432
    DB_NAME: terraflow_landregistry
    DB_USER: postgres
    DB_PASSWORD: password

backendDocuments:
  replicaCount: 1
  image:
    repository: terraflow/backend-documents
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3002
  env:
    DB_HOST: postgres-documents-service
    DB_PORT: 5433
    DB_NAME: terraflow_documents
    DB_USER: postgres
    DB_PASSWORD: password
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

backend-users:
  replicaCount: 1
  image:
    repository: terraflow/backend-users
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3001
  env:
    DB_HOST: postgres-users-service
    DB_PORT: 5434
    DB_NAME: terraflow_users
    DB_USER: postgres
    DB_PASSWORD: password
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

backend-payments:
  replicaCount: 1
  image:
    repository: terraflow/backend-payments
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3003
  env:
    DB_HOST: postgres-payments-service
    DB_PORT: 5435
    DB_NAME: terraflow_payments
    DB_USER: postgres
    DB_PASSWORD: password
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

postgresql:
  enabled: true
  service:
    name: postgres-service
    port: 5432
  auth:
    username: postgres
    password: password
    database: terraflow_landregistry

postgresDocuments:
  enabled: true
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 5433
    name: postgres-documents-service
  auth:
    username: postgres
    password: password
    database: terraflow_documents
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

postgresUsers:
  enabled: true
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 5434
    name: postgres-users-service
  auth:
    username: postgres
    password: password
    database: terraflow_users
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

postgresPayments:
  enabled: true
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 5435
    name: postgres-payments-service
  auth:
    username: postgres
    password: password
    database: terraflow_payments
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

rabbitmq:
  enabled: true
  service:
    name: rabbitmq-service
    port: "5672"
  auth:
    username: admin
    password: password
  management:
    enabled: true

redis:
  enabled: true

# Hyperledger Fabric Configuration
fabric:
  enabled: true
  
  # Fabric Orderer
  orderer:
    replicaCount: 1
    image:
      repository: hyperledger/fabric-orderer
      tag: "2.4"
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 7050
      operationsPort: 17050
    env:
      FABRIC_LOGGING_SPEC: "INFO"
      ORDERER_GENERAL_LISTENADDRESS: "0.0.0.0"
      ORDERER_GENERAL_LISTENPORT: "7050"
      ORDERER_GENERAL_GENESISMETHOD: "file"
      ORDERER_GENERAL_LOCALMSPID: "OrdererMSP"
      ORDERER_GENERAL_TLS_ENABLED: "false"
    resources:
      requests:
        memory: "512Mi"
        cpu: "500m"
      limits:
        memory: "1Gi"
        cpu: "1000m"
    storage:
      size: "5Gi"
      storageClass: ""
  
  # Fabric Peer
  peer:
    replicaCount: 1
    image:
      repository: hyperledger/fabric-peer
      tag: "2.4"
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 7051
      chaincodePort: 7052
      operationsPort: 17051
    env:
      FABRIC_LOGGING_SPEC: "INFO"
      CORE_PEER_TLS_ENABLED: "false"
      CORE_PEER_PROFILE_ENABLED: "true"
      CORE_PEER_ID: "peer0.landregistry.terraflow.com"
      CORE_PEER_LOCALMSPID: "LandRegistryMSP"
      CORE_LEDGER_STATE_STATEDATABASE: "CouchDB"
    resources:
      requests:
        memory: "1Gi"
        cpu: "500m"
      limits:
        memory: "2Gi"
        cpu: "1000m"
    storage:
      size: "10Gi"
      storageClass: ""
  
  # Fabric CouchDB
  couchdb:
    replicaCount: 1
    image:
      repository: couchdb
      tag: "3.1.1"
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 5984
    auth:
      username: "admin"
      password: "adminpw"
    resources:
      requests:
        memory: "512Mi"
        cpu: "250m"
      limits:
        memory: "1Gi"
        cpu: "500m"
    storage:
      size: "5Gi"
      storageClass: ""

# Backend Blockchain Service
backend-blockchain:
  enabled: true
  replicaCount: 1
  image:
    repository: terraflow/backend-blockchain
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 50051
  env:
    FABRIC_CA_URL: "fabric-ca-service:7054"
    FABRIC_PEER_URL: "fabric-peer-service:7051"
    FABRIC_ORDERER_URL: "fabric-orderer-service:7050"
    GRPC_PORT: "50051"
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"